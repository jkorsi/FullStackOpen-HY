{"version":3,"sources":["../node_modules/express/lib sync","components/Filter.js","components/Person.js","services/deleteData.js","components/PersonsList.js","components/Inputs.js","services/getData.js","services/addData.js","services/updateData.js","components/Notification.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","filterValue","handleFilterChange","Filter","filter","react_default","a","createElement","style","padding","value","onChange","Person","_ref","person","deletePerson","name","number","onClick","deleteData","window","confirm","axios","delete","concat","then","response","data","catch","error","alert","PersonsList","props","console","log","filteredRows","toLowerCase","includes","map","filteredPerson","components_Person","key","Inputs","inputs","onSubmit","addPersonAndNumber","newName","handlePersonsChange","newPhone","handlePhoneChange","type","getAll","get","addData","newObject","post","updateData","put","Notification","message","isSuccess","color","toString","className","App","_useState","useState","_useState2","Object","slicedToArray","personsList","setPersonsList","_useState3","_useState4","setName","_useState5","_useState6","setPhone","_useState7","_useState8","setFilter","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","setSuccess","baseUrl","useEffect","initialPersons","throwMessage","errorParam","setTimeout","components_Notification","components_Filter","event","target","components_Inputs","preventDefault","length","personToUpdate","find","changedPerson","objectSpread","updatePerson","personObject","components_PersonsList","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.5db5f37c.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 263;","import React from 'react'\r\n\r\n\r\nlet filterValue;\r\nlet handleFilterChange;\r\n\r\nconst Filter = ( filter ) =>\r\n{\r\n\r\n    if ( typeof filter.filterValue == null )\r\n    {\r\n        filterValue = ''\r\n    } else\r\n    {\r\n        filterValue = filter.filterValue\r\n    }\r\n\r\n    if ( typeof filter.handleFilterChange == null )\r\n    {\r\n        handleFilterChange = ''\r\n    } else\r\n    {\r\n        handleFilterChange = filter.handleFilterChange\r\n    }\r\n\r\n    return (\r\n        <div style={ { padding: 10 } }>\r\n            Filtteri: <input value={ filterValue } onChange={ handleFilterChange } />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter ","import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) =>\r\n{\r\n  const label = 'Poista'\r\n  const space = ' '\r\n  const comma = ','\r\n  return (\r\n    <li>\r\n      {person.name}{comma} {person.number} {space}\r\n      <button onClick={deletePerson}>{label}</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Person","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst deleteData = id =>\r\n{\r\n    if (window.confirm('Haluatko varmasti poistaa henkilön?'))\r\n    {\r\n\r\n        const request = axios.delete(`${baseUrl}/${id}`)\r\n        return request\r\n            .then(response => response.data)\r\n            .catch(error =>\r\n            {\r\n                alert(\r\n                    `The person '${id}' was already deleted from server`\r\n                )\r\n            })\r\n    }\r\n}\r\n\r\nexport default deleteData\r\n\r\n    // .then( returnedNote =>\r\n    // {\r\n    //     setNotes( notes.map( note => note.id !== id ? note : returnedNote ) )\r\n    // } ).catch( error =>\r\n    // {\r\n    //     alert(\r\n    //         `the note '${ note.content }' was already deleted from server`\r\n    //     )\r\n    //     setNotes( notes.filter( n => n.id !== id ) )\r\n    // } )","import React from 'react'\r\nimport Person from './Person'\r\nimport Filter from './Filter'\r\nimport deleteData from '../services/deleteData'\r\n\r\n\r\n//TOIMII - ÄLÄ KOSKE\r\nconst PersonsList = (props) =>\r\n{\r\n    console.log('Filtered rows propsit: ', props)\r\n    console.log(props.filteredRows)\r\n    return props.filteredRows.filter(person =>\r\n\r\n        person.name.toLowerCase().includes(props.filterValue.toLowerCase())).map(filteredPerson =>\r\n        {\r\n            return (\r\n                //Komponentti\r\n                <Person\r\n                    //Tämän perusteella komponentit erotellaan arrayssa\r\n                    key={filteredPerson.id}\r\n\r\n                    //Tämä sisältö näytetään\r\n                    person={filteredPerson}\r\n\r\n                    //Rekisteröidään nappula id:n avulla tälle objektille\r\n                    deletePerson={() => props.deletePerson(filteredPerson.id)}\r\n                />\r\n            )\r\n        })\r\n}\r\n\r\nexport default PersonsList","import React from 'react'\r\n\r\nconst Inputs = ( inputs ) =>\r\n{\r\n\r\n    return (\r\n        <form onSubmit={ inputs.addPersonAndNumber }>\r\n            <div style={ { padding: 10 } }>\r\n                Nimi: <input value={ inputs.newName } onChange={ inputs.handlePersonsChange } />\r\n            </div>\r\n            <div style={ { padding: 10 } }>\r\n                Puhelinnumero: <input value={ inputs.newPhone } onChange={ inputs.handlePhoneChange } />\r\n            </div>\r\n            <div>\r\n                <br></br>\r\n                <button type=\"submit\">Lisää</button>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n}\r\n\r\nexport default Inputs ","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () =>\r\n{\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default getAll","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons/'\r\n\r\nconst addData = newObject =>\r\n{\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default addData","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst updateData = (id, newObject) =>\r\n{\r\n    console.log(\"ID: \", id)\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default updateData","import React, { useState } from 'react'\r\n\r\nconst Notification = ( { message, isSuccess } ) =>\r\n{\r\n\r\n    var color = 'green'\r\n    console.log( 'Message', message )\r\n    console.log( 'Success ', isSuccess.toString() )\r\n\r\n\r\n    if ( message === null )\r\n    {\r\n        return null\r\n    }\r\n\r\n\r\n    if ( !isSuccess )\r\n    {\r\n        color = 'red'\r\n        console.log( \"No success\" )\r\n    } else if ( isSuccess )\r\n    {\r\n        color = 'green'\r\n        console.log( \"Success\" )\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\" style={ { color: color } }>\r\n            { message }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n\r\n\r\n//style = { { width: 150, height: 90 } }","import React, {useState, useEffect} from 'react'\r\n\r\nimport Filter from './components/Filter'\r\nimport PersonsList from './components/PersonsList'\r\nimport Inputs from './components/Inputs'\r\nimport Person from './components/Person'\r\nimport getAll from './services/getData'\r\nimport addData from './services/addData'\r\nimport deleteData from './services/deleteData'\r\nimport updateData from './services/updateData'\r\nimport Notification from './components/Notification'\r\n\r\nimport express from 'express'\r\nimport './App.css';\r\n\r\nconst App = () =>\r\n{\r\n    // Tilamuuttujat\r\n    const [personsList, setPersonsList] = useState([])\r\n    const [newName, setName] = useState('')\r\n    const [newPhone, setPhone] = useState('')\r\n    const [filterValue, setFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [isSuccess, setSuccess] = useState(true)\r\n\r\n    const filteredRows = personsList\r\n    const baseUrl = '/api/persons/'\r\n\r\n\r\n    //Efekti, jolla noudetaan henkilölista ja asetetaan se tilamuuttujaan\r\n    const hook = () =>\r\n    {\r\n        getAll()\r\n            .then(initialPersons =>\r\n            {\r\n                console.log('Promise fulfilled')\r\n                console.log(initialPersons)\r\n                setPersonsList(initialPersons)\r\n            })\r\n    }\r\n\r\n    useEffect(hook, [])\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePersonsChange = (event) =>\r\n    {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePhoneChange = (event) =>\r\n    {\r\n        setPhone(event.target.value)\r\n    }\r\n\r\n    //TOIMII - ÄLÄ KOSKE\r\n    const handleFilterChange = (event) =>\r\n    {\r\n        setFilter(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const addOrUpdatePerson = (event) =>\r\n    {\r\n        event.preventDefault()\r\n\r\n        if (personsList.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length > 0)\r\n        {\r\n            if (window.confirm(`Henkilö ${newName} on jo olemassa. Päivitetäänkö numero?`))\r\n            {\r\n                updatePerson()\r\n            }\r\n        } else\r\n        {\r\n            const personObject = {\r\n                name: newName,\r\n                number: newPhone\r\n            }\r\n            addData(personObject)\r\n                .then(response =>\r\n                {\r\n                    setSuccess(true)\r\n                    setPersonsList(personsList.concat(personObject))\r\n                    setName('')\r\n                    setPhone('')\r\n                    throwMessage(`Henkilö ${personObject.name} lisätty`)\r\n                })\r\n        }\r\n    }\r\n\r\n    function updatePerson()\r\n    {\r\n        const name = newName\r\n\r\n        const personToUpdate = personsList.find(person => person.name === name)\r\n        const id = personToUpdate.id\r\n\r\n        const url = `${baseUrl}${id}`\r\n\r\n        console.log(personToUpdate)\r\n        const changedPerson = {...personToUpdate, number: newPhone}\r\n        console.log(changedPerson)\r\n        updateData(id, changedPerson)\r\n            .then(changedPerson =>\r\n            {\r\n                setSuccess(true)\r\n                setPersonsList(personsList.map(person => person.id !== id ? person : changedPerson))\r\n                setName('')\r\n                setPhone('')\r\n                throwMessage(`Henkilön ${name} numero päivitetty.`)\r\n            })\r\n            .catch(error =>\r\n            {\r\n                setSuccess(false)\r\n                throwMessage(`Henkilö ${name} on poistettu palvelimelta. :( Kokeile lisätä henkilö uudelleen!`)\r\n                setPersonsList(personsList.filter(person => person.id !== id))\r\n            })\r\n    }\r\n\r\n    function deletePerson(id)\r\n    {\r\n        setSuccess(true)\r\n        deleteData(id)\r\n            .then(setPersonsList(personsList.filter(person => person.id !== id)))\r\n\r\n        throwMessage(`Poistettiin henkilö ${id}`)\r\n    }\r\n\r\n    function throwMessage(errorParam)\r\n    {\r\n        setErrorMessage(\r\n            (`${errorParam}`)\r\n        )\r\n        setTimeout(() =>\r\n        {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n\r\n    }\r\n\r\n\r\n    // Refaktoroi komponentit omiin tiedostoihin\r\n    return (\r\n        <div>\r\n            <h2>Puhelinluettelo</h2>\r\n            <Notification\r\n                message={errorMessage}\r\n                isSuccess={isSuccess}\r\n            />\r\n\r\n            <h3>Hae henkilöä</h3>\r\n            <Filter\r\n                filterValue={filterValue}\r\n                handleFilterChange={handleFilterChange}\r\n            />\r\n            <h3>Lisää henkilö</h3>\r\n            <Inputs\r\n                addPersonAndNumber={addOrUpdatePerson}\r\n                newName={newName}\r\n                handlePersonsChange={handlePersonsChange}\r\n                newPhone={newPhone}\r\n                handlePhoneChange={handlePhoneChange}\r\n            />\r\n            <h2>Numerot</h2>\r\n            <ul>\r\n                <PersonsList\r\n                    filterValue={filterValue}\r\n                    filteredRows={filteredRows}\r\n                    deletePerson={deletePerson}\r\n                />\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render( <App />, document.getElementById( 'root' ) )"],"sourceRoot":""}